<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>

  Redirecting AJAX requests in Rails · Máximo Mussini

</title>

<meta name="author" content="Máximo Mussini">
<meta name="description" content="jquery-rails powers links and forms in Rails: it’s what makes remote: true work, allowing any link to make an AJAX request unobtrusively.

rails-ajax_redirect is an extension to this unobtrusive behaviour that adds AJAX support to redirect_to. It allows us to redirect an AJAX request as usual, instead of having to perform the redirect by handling the response manually in JS every time.

This is helpful in many different scenarios, and ju…">
<meta name="keywords" content="">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="cleartype" content="on">
<meta name="theme-color" content="#5C7E8F" />

<!-- Styles -->
<link rel="preconnect" href="//fonts.googleapis.com">
<link rel="preload" href="//fonts.googleapis.com/css?family=Raleway:700,800,900|Lato:400,400italic,700,900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" type="text/css" media="screen, projection">
<link rel="stylesheet" href="/assets/css/styles.css" media="screen, projection">

<!-- Icons -->
<link rel="shortcut icon" href="/favicon.ico">
<link rel="icon" sizes="192x192" href="/icon.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.jpg">
<link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Máximo Mussini · Code and Design">

<!-- Facebook Stuff -->
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="http://maximomussini.com/posts/rails-ajax_redirect/">
<meta property="og:site_name" content="Máximo Mussini">
<meta property="og:title" content="Redirecting AJAX requests in Rails">
<meta property="og:image" content="http://maximomussini.com/images/posts/rails-ajax_redirect.jpg">
<meta property="og:description" content="jquery-rails powers links and forms in Rails: it’s what makes remote: true work, allowing any link to make an AJAX request unobtrusively.

rails-ajax_redirect is an extension to this unobtrusive behaviour that adds AJAX support to redirect_to. It allows us to redirect an AJAX request as usual, instead of having to perform the redirect by handling the response manually in JS every time.

This is helpful in many different scenarios, and ju…">

<!-- Twitter Stuff -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:domain" value="maximomussini.com" />
<meta name="twitter:title" value="Redirecting AJAX requests in Rails" />
<meta name="twitter:description" value="jquery-rails powers links and forms in Rails: it’s what makes remote: true work, allowing any link to make an AJAX request unobtrusively.

rails-ajax_redirect is an extension to this unobtrusive behaviour that adds AJAX support to redirect_to. It allows us to redirect an AJAX request as usual, instead of having to perform the redirect by handling the response manually in JS every time.

This is helpful in many different scenarios, and ju…" />
<meta name="twitter:image" content="http://maximomussini.com/images/posts/rails-ajax_redirect.jpg" />
<meta name="twitter:url" value="http://maximomussini.com/posts/rails-ajax_redirect/" />

  </head>
  <body>
    <header style="background-image: url('data:image/jpeg;base64,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')">
  
    <div class="hero" style="background-image: url(/images/posts/rails-ajax_redirect.jpg)">
      <h1>Redirecting AJAX requests in Rails</h1>
    </div>
  
</header>

    <div class="menu container">
  <ul>
    
<li>
  <a href="/about/">About</a>
</li>

    
<li>
  <a href="/posts/">Posts</a>
</li>

    <li>
      <a href="/" class="logo">
  <img class="logo-img" src="/assets/icons/logo.svg" alt="Logo">
</a>

    </li>
    
<li>
  <a href="/projects/">Projects</a>
</li>

    
<li>
  <a href="/talks/">Talks</a>
</li>

  </ul>
  <hr>
</div>

    <div class="content container">
  

  <div class="post-info">
  <span class="date">January 11, 2016</span>
  <span class="reading-time">2 min read</span>
</div>


  <div class="post">
    <p><a href="https://github.com/rails/jquery-rails"><code class="highlighter-rouge">jquery-rails</code></a> powers links and forms in Rails: it’s what makes <code class="highlighter-rouge">remote: true</code> work, allowing any link to make an AJAX request unobtrusively.</p>

<p><a href="https://github.com/ElMassimo/rails-ajax_redirect"><code class="highlighter-rouge">rails-ajax_redirect</code></a> is an extension to this unobtrusive behaviour that adds AJAX support to <code class="highlighter-rouge">redirect_to</code>. It allows us to redirect an AJAX request as usual, instead of having to perform the redirect by handling the response manually in JS every time.</p>

<p>This is helpful in many different scenarios, and just like <code class="highlighter-rouge">remote: true</code>, it allows us to skip some of the boilerplate in cases where we need to redirect the user to a different page.</p>

<p><a href="https://github.com/ElMassimo/rails-ajax_redirect"><code class="highlighter-rouge">Rails::AjaxRedirect</code></a> extends <code class="highlighter-rouge">redirect_to</code> to use a custom status code for ajax
requests, while still setting the <code class="highlighter-rouge">Location</code> header. On the front-end, it adds a handler for the <code class="highlighter-rouge">ajax:success</code> event, that navigates to the location in the header for responses that have the custom status code.</p>

<p>This makes it possible to write a simple redirect as usual, but without having to handle it manually every time <img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20"></p>

<h2 id="turbolinks">Turbolinks</h2>
<p>If your application uses <a href="https://github.com/rails/turbolinks"><em>Turbolinks</em></a> check out <a href="https://github.com/remind101/turbolinks-redirect"><code class="highlighter-rouge">turbolinks-redirect</code></a>, on which <a href="https://github.com/ElMassimo/rails-ajax_redirect"><code class="highlighter-rouge">rails-ajax_redirect</code></a> is based on. The advantage is that it will perform faster navigation by leveraging <em>Turbolinks</em> to visit the new location.</p>

<h2 id="axios">Axios</h2>

<p>If your application makes the AJAX request using <code class="highlighter-rouge">axios</code> instead of <code class="highlighter-rouge">jQuery</code>, it will be necessary to add an interceptor similar to this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="nx">AJAX_REDIRECT_STATUS_CODE</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">location</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">response</span>
  <span class="p">},</span>
  <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div></div>

  </div>

  <div class="ending">
  <div class="author">
    <a href="/" class="logo">
  <img class="logo-img" src="/assets/icons/logo.svg" alt="Logo">
</a>

    <span>By</span>
    <a href="https://twitter.com/MaximoMussini" class="author-name short">@Maximo</a>
    <a href="https://twitter.com/MaximoMussini" class="author-name full">@MaximoMussini</a>
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-via="MaximoMussini" data-related="" data-show-count="false">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

  </div>
</div>

</div>



  <a id="next-post" href="/posts/cucumber-to_or_not_to/" class="hidden"></a>




  <div class="previous-post">
    <div class="content container">
      <a id="previous-post" href="/posts/anko-vs-android-xml/" class="overlay">
        <h1>Anko DSL vs Android XML-First</h1>
        <div class="post-info">
  <span class="date">January 04, 2016</span>
  <span class="reading-time">5 min read</span>
</div>

        <div class="post">
          <p><span href="https://github.com/kotlin/anko"><em>Anko</em></span> is a library for <em>Android</em> development in <span href="https://kotlinlang.org"><em>Kotlin</em></span>. The library provides helper methods that take advantage of <em>Kotlin</em>’s extension functions as a way to reduce the amount of boilerplate the <em>Android SDK</em> requires. Those extension functions make it possible to accomplish common tasks like starting an activity or displaying a toast in a very succinct way.</p>

<p>A big part of…</p>
        </div>
      </a>
    </div>
  </div>



    <script>
if (document.location.hostname.search('maximomussini.com') !== -1) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-67510525-1', 'auto');
  ga('send', 'pageview');
}
</script>

<script src="/assets/js/anchors.js"></script>
<script src="/assets/js/shortcuts.js"></script>

  </body>
</html>
